{"version":3,"sources":["webpack:///./js/news-service.js","webpack:///./js/refs.js","webpack:///./js/update-articles-markup.js","webpack:///./js/components/load-more-button.js","webpack:///./index.js","webpack:///./templates/articles.hbs"],"names":["searchQuery","page","fetchArticles","url","this","query","fetch","headers","Authorization","then","res","json","articles","incrementPage","resetPage","value","searchForm","document","querySelector","articlesContainer","updateArticlesMarkup","markup","articlesTpl","refs","insertAdjacentHTML","LoadMoreBtn","selector","getRefs","button","label","spinner","enable","disabled","textContent","classList","add","disable","remove","show","loadMoreBtn","newsService","addEventListener","event","preventDefault","form","currentTarget","elements","innerHTML","reset","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.568a33ea49bb44ab04e0.js","sourcesContent":["const apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\n\n// Тут мы храним всю логику \n// (хранение, обработка, обновление)\n\nexport default {\n   searchQuery: \"\",\n   page: 1,\n\n   fetchArticles() {\n      const url = `http://newsapi.org/v2/everything?q=\n      ${this.query}&language=en&pageSize=2&page=\n      ${this.page}`;\n      const options = {\n         headers: {\n            Authorization: apiKey,\n         },\n      };\n\n      return fetch(url, options)\n         .then(res => res.json())\n         .then(({ articles }) => {\n            this.incrementPage();\n\n            return articles;\n         });\n   },\n\n   resetPage() {\n      this.page = 1;\n   },\n\n   incrementPage() {\n      this.page += 1;\n   },\n\n   get query() {\n      return this.searchQuery;\n   },\n\n   set query(value) {\n      this.searchQuery = value;\n   },\n};","const searchForm = document.querySelector('.js-search-form');\nconst articlesContainer = document.querySelector('.js-articles');\n\nexport default {\n   searchForm,\n   articlesContainer\n};","import articlesTpl from \"../templates/articles.hbs\";\nimport refs from \"./refs\";\n\nfunction updateArticlesMarkup(articles) {\n  const markup = articlesTpl(articles);\n      refs.articlesContainer.insertAdjacentHTML(\"beforeend\", markup); \n};\n\nexport default updateArticlesMarkup;","export default class LoadMoreBtn {\n   constructor(selector) {\n      this.refs = this.getRefs(selector);\n   }\n\n   getRefs(selector) {\n      const refs = {};\n      refs.button = document.querySelector(selector);\n      refs.label = refs.button.querySelector(\".label\");\n      refs.spinner = refs.button.querySelector(\".spinner\");\n\n      return refs;\n   }\n\n   enable() {\n      this.refs.button.disabled = false;\n      this.refs.label.textContent = \"Показать еще\";\n      this.refs.spinner.classList.add(\"is-hidden\");\n   }\n\n   disable() {\n      this.refs.button.disabled = true;\n      this.refs.label.textContent = \"Загружаем...\";\n      this.refs.spinner.classList.remove(\"is-hidden\");\n   }\n\n   show() {\n      this.refs.button.classList.remove(\"is-hidden\");\n   }\n};\n\n\n// const loadMoreBtn = {\n//    refs: {\n//       button: document.querySelector('[data-action=\"load-more\"]'),\n//       label: document.querySelector('[data-action=\"load-more\"] > .label'),\n//       spinner: document.querySelector('[data-action=\"load-more\"] > .spinner')\n//    },\n\n//    enable() {\n//       this.refs.button.disabled = false;\n//       this.refs.label.textContent = \"Показать еще\";\n//       this.refs.spinner.classList.add(\"is-hidden\");\n//    },\n\n//    disable() {\n//       this.refs.button.disabled = true;\n//       this.refs.label.textContent = \"Загружаем...\";\n//       this.refs.spinner.classList.remove(\"is-hidden\");\n//    },\n\n//    show() {\n//       this.refs.button.classList.remove(\"is-hidden\");\n//    }\n// };\n\n// export default loadMoreBtn;","import newsService from \"./js/news-service\";\nimport updateArticlesMarkup from \"./js/update-articles-markup\";\nimport LoadMoreBtn from \"./js/components/load-more-button\";\nimport refs from \"./js/refs\";\nimport './styles.css';\n\nconst loadMoreBtn = new LoadMoreBtn('button[data-action=\"load-more\"]');\n\n// https://spin.js.org - Библиотека спиннеров\n\n/*\n\n// Опции\n\nconst options = {\n   method: \"GET\",\n   headers: {\n      Accept: \"application/json\",\n   },\n};\n\n*/\n/*\n\n// jsonplaceholder - Бекенд 1.\n\n// Операция асинхронная\n// в зене получаем респонс и мы от сюда возвращаем response.json (результат парса)\nfetch(\"https://jsonplaceholder.typicode.com/users\")\n   .then(response => response.json())\n   .then(data => console.log(data));\n\n*/\n/*\n\n// algolia - Бекенд 2.1.\n\n// Корень - http://hn.algolia.com\n// Бекпоинт - api/v1/search\n// Квери стринг (параметры) - ?query=... (?параметр=значение)\n\n// Используем один параметр (query=html)\nfetch(\"http://hn.algolia.com/api/v1/search?query=html\")\n   .then(res => res.json())\n   .then(data => console.log(data));\n\n*/\n/*\n\n// algolia - Бекенд 2.2.\n\n// Используем несколько параметров\n// Пары разделяются амперсантом (&)\nfetch(\"http://hn.algolia.com/api/v1/search?query=html&tags=story\")\n   .then(res => res.json())\n   .then(data => console.log(data));\n\n*/\n/*\n\n// News API - Бекенд 3.1.\n\n// Использование ключа\nfetch(\"http://newsapi.org/v2/everything?q=bitcoin&language=en&apiKey=f5880e4ea9c14e78adf47ba8e282475f\");\n\n*/\n/*\n\n// News API - Бекенд 3.2.\n\n// Рефакторинг кода\n\nconst apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\nconst url = `http://newsapi.org/v2/everything?q=bitcoin&language=en&apiKey=${apiKey}`;\n\nfetch(url)\n   .then(res => res.json())\n   .then(data => console.log(data.articles));\n\n*/\n/*\n\n// News API - Бекенд 3.3.\n\n// Ключ в заголовке\n// Ошибки ловим в catch\n\nconst apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\nconst url = `http://newsapi.org/v2/everything?q=bitcoin&language=en`;\n\nconst options = {\n   headers: {\n      \"Authorization\": apiKey,\n   },\n};\n\nfetch(url, options)\n   .then(res => res.json())\n   .then(data => console.log(data.articles))\n   .catch(error => console.log(error));\n\n*/\n/*\n\n// Разметка - Бекенд 4.1.\n\n// Делаем шаблон\n\nconst refs = {\n   articlesContainer: document.querySelector('.js-articles')\n}\n\nconst apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\nconst url = `http://newsapi.org/v2/everything?q=bitcoin&language=en`;\n\nconst options = {\n   headers: {\n      \"Authorization\": apiKey,\n   },\n};\n\nfetch(url, options)\n   .then(res => res.json())\n   .then(({ articles }) => {\n      console.log(articles);\n\n      const markup = articlesTpl(articles);\n      console.log(markup);\n      refs.articlesContainer.insertAdjacentHTML(\"beforeend\", markup);\n   })\n   .catch(error => console.log(error));\n\n*/\n/*\n\n// Search Form - Бекенд 4.2.\n\nconst refs = {\n   articlesContainer: document.querySelector('.js-articles'),\n   searchForm: document.querySelector('.js-search-form')\n};\n\nrefs.searchForm.addEventListener(\"submit\", event => {\n   event.preventDefault();\n\n   const form = event.currentTarget;\n   const inputValue = form.elements.query.value\n   console.log(inputValue);\n});\n\nconst apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\nconst url = `http://newsapi.org/v2/everything?q=bitcoin&language=en`;\n\nconst options = {\n   headers: {\n      \"Authorization\": apiKey,\n   },\n};\n\nfetch(url, options)\n   .then(res => res.json())\n   .then(({ articles }) => {\n      console.log(articles);\n\n      const markup = articlesTpl(articles);\n      // console.log(markup);\n      refs.articlesContainer.insertAdjacentHTML(\"beforeend\", markup);\n   })\n   .catch(error => console.log(error));\n\n*/\n/*\n\n// Search Form - Бекенд 4.3.\n\n// Во время сабмита формы делаем http запрос\n\nconst refs = {\n   articlesContainer: document.querySelector('.js-articles'),\n   searchForm: document.querySelector('.js-search-form')\n};\n\nrefs.searchForm.addEventListener(\"submit\", event => {\n   event.preventDefault();\n\n   const form = event.currentTarget;\n   const inputValue = form.elements.query.value\n\n   const apiKey = \"f5880e4ea9c14e78adf47ba8e282475f\";\n   const url = `http://newsapi.org/v2/everything?q=${inputValue}&language=en`;\n\n   const options = {\n   headers: {\n      \"Authorization\": apiKey,\n   },\n};\n   \n   refs.articlesContainer.innerHTML = \"\";\n   \n   fetch(url, options)\n   .then(res => res.json())\n   .then(({ articles }) => {\n      const markup = articlesTpl(articles);\n      refs.articlesContainer.insertAdjacentHTML(\"beforeend\", markup);\n   })\n   .catch(error => console.log(error));\n});\n\n*/\n// /*\n\n// Search Form - Бекенд 4.4.\n\n// Рефакторинг\n// Разделяем логику и представление\n// Создаем js/fetch-articles.js\n// Создаем update-articles-markup.js\n\n\n\nrefs.searchForm.addEventListener(\"submit\", searchFormSubmitHanbler);\nloadMoreBtn.refs.button.addEventListener(\"click\", fetchArticles);\n\nfunction searchFormSubmitHanbler(event) {\n   event.preventDefault();\n\n   const form = event.currentTarget;\n   newsService.query = form.elements.query.value\n\n   clearArticlesContainer();\n   newsService.resetPage();\n   fetchArticles();\n   form.reset();\n}\n\nfunction fetchArticles(){\n   loadMoreBtn.disable();\n\n   newsService.fetchArticles().then(articles => {\n         updateArticlesMarkup(articles);\n         loadMoreBtn.show()\n         loadMoreBtn.enable();\n      });\n};\n\nfunction clearArticlesContainer() {\n   refs.articlesContainer.innerHTML = \"\";\n}\n\n// */\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\n   <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"urlToImage\") || (depth0 != null ? lookupProperty(depth0,\"urlToImage\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"urlToImage\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":13},\"end\":{\"line\":3,\"column\":27}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"320\\\">\\n   <a href=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"url\") || (depth0 != null ? lookupProperty(depth0,\"url\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"url\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":12},\"end\":{\"line\":4,\"column\":19}}}) : helper)))\n    + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":63},\"end\":{\"line\":4,\"column\":72}}}) : helper)))\n    + \"</a>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":6,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}